(this["webpackJsonpreact-test"]=this["webpackJsonpreact-test"]||[]).push([[0],{37:function(e,t,n){e.exports=n(77)},42:function(e,t,n){},71:function(e,t){},74:function(e,t,n){e.exports=n.p+"static/media/logo.25bf045c.svg"},75:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(29),s=n.n(r),i=(n(42),n(3)),c=(n(43),n(6)),l=n.n(c),u=n(30),m=n.n(u),d=(n(74),n(75),n(15)),h=n.n(d),p=n(34),f=n(31),v=n(32),g=n(35),w=n(33),E=n(36),b=function(e){function t(){var e;Object(f.a)(this,t),(e=Object(g.a)(this,Object(w.a)(t).call(this))).sendMsg=function(t){console.log(t),e.state.socket.emit("message",t)},e.handleChange=function(t){e.setState({value:t.target.value})},e.handleSend=function(){e.sendMsg(e.state.value),e.setState({value:""})},e.writeSummary=function(t){e.setState({summary:"chat summary: \n"+t})},e.summarizeReq=function(){var t=e.state.transcript;fetch("/summarize?unpunctuated=true&body="+t,{method:"GET"}).then((function(e){return e.text()})).then((function(t){console.log(t),e.writeSummary(t)}),(function(e){console.log("no bueno"),console.log(e)}))},e.inviteMsg=function(){var t='Hello, a friend has invited you to a meeting! Enter room code "'+e.props.roomCode+'" at '+window.location.href;fetch("/send?to="+e.state.phoneNumber+"&message="+t,{method:"GET",mode:"no-cors"})},e.componentDidMount=function(){e.state.socket.on("news",(function(e){console.log(e)})),e.state.socket.on("message",(function(t){console.log("message received: "+t),e.setState({transcript:e.state.transcript+"\n "+t}),console.log(e.state.transcript)}));setInterval(e.checkForVote,1e3)},e.checkForVote=function(){if(!e.state.voteActive){var t=0;e.state.transcript.split("\n").forEach((function(n){n.split(" ").forEach((function(n){"vote"==n&&++t>e.state.votesHeld&&e.startVote()}))}))}},e.startVote=function(){console.log("vote started"),e.setState({voteActive:!0}),e.setState({messages:"VOTE IN PROGRESS"}),e.setState({votesHeld:e.state.votesHeld+1});setTimeout(e.endVote,2e4)},e.endVote=function(){e.setState({voteActive:!1}),e.setState({messages:"chat transcript"}),console.log("vote finished"),e.state.wordCount=new Map,e.state.transcript.split("\n").forEach((function(t){t.split(" ").forEach((function(t){var n=t.toLowerCase();e.state.wordCount.has(n)?e.state.wordCount.set(n,e.state.wordCount.get(n)+1):e.state.wordCount.set(n,1)}))}));["","vote","and","is","to","or","the","of","a","in","that","it","for","on"].forEach((function(t){var n=t.toLowerCase();e.state.wordCount.has(n)&&e.state.wordCount.delete(n)})),console.log(e.state.wordCount),e.state.wordCount[Symbol.iterator]=h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(Object(p.a)(this.entries()).sort((function(e,t){return t[1]-e[1]})),"t0",1);case 1:case"end":return e.stop()}}),e,this)}));var t=0,n="Vote Complete. Top 3 Results were: \n",o=!0,a=!1,r=void 0;try{for(var s,c=e.state.wordCount[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value,u=Object(i.a)(l,2);if(n+=u[0]+" with "+u[1]+" votes \n",3==++t)break}}catch(m){a=!0,r=m}finally{try{o||null==c.return||c.return()}finally{if(a)throw r}}e.setState({transcript:e.state.transcript+"\n"+n})};var n=new window.webkitSpeechRecognition;return n.continuous=!0,n.interimResults=!1,n.lang="en-US",n.onresult=function(t){var n=t.results[t.results.length-1][0].transcript;e.sendMsg(n)},e.state={color:"white",socket:l()("/"),value:"type something!",messages:"chat transcript",transcript:"",summary:"",recognition:n,voteActive:!1,votesHeld:0,wordCount:new Map,phoneNumber:""},e}return Object(E.a)(t,e),Object(v.a)(t,[{key:"componentDidUpdate",value:function(e){e.active!=this.props.active&&(1==this.props.active?this.state.recognition.start():this.state.registration.stop())}},{key:"render",value:function(){var e=this;return this.props.active?a.a.createElement("div",{style:{textAlign:"center",padding:5}},a.a.createElement("h2",null,"Room Code:")," ",a.a.createElement("strong",{style:{fontSize:30}}," ",this.props.roomCode),a.a.createElement("p",null,"Invite a friend (phone number) ",a.a.createElement("br",null),a.a.createElement("input",{value:this.state.phoneNumber,onChange:function(t){return e.setState({phoneNumber:t.target.value})}}),a.a.createElement("button",{onClick:function(t){e.inviteMsg(),e.setState({phoneNumber:""})}}," send ")),a.a.createElement("div",null,a.a.createElement("button",{id:"summarize",onClick:this.summarizeReq},"Summarize Meeting"),a.a.createElement("p",null,this.state.summary),a.a.createElement("p",null," ",a.a.createElement("strong",null," ",this.state.messages," ")," ")),a.a.createElement("div",{style:{textAlign:"left",backgroundColor:"#333",width:"90%",margin:"auto"}},a.a.createElement("pre",null,this.state.transcript))):null}}]),t}(o.Component);var y=function(){window.io=c;var e=a.a.useState(""),t=Object(i.a)(e,2),n=t[0],o=t[1],r=a.a.useState(!1),s=Object(i.a)(r,2),l=s[0],u=s[1],d=new m.a;return d.socketURL="https://rtcmulticonnection.herokuapp.com:443/",d.session={audio:!0,video:!0},d.sdpConstraints.mandatory={OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},d.onstream=function(e){var t=e.mediaElement;t.controls=!1,t.style.cssText="-moz-transform: scale(-1, 1);\n-webkit-transform: scale(-1, 1); -o-transform: scale(-1, 1);\ntransform: scale(-1, 1); filter: FlipH; width: 300px;",document.getElementById("callers").appendChild(e.mediaElement)},a.a.createElement("div",{className:"App"},a.a.createElement("div",{style:{display:l?"none":"block",textAlign:"center"}},a.a.createElement("h1",null,"AutoScribe"),a.a.createElement("br",null),a.a.createElement("h2",null,"Enter your roomcode below"),a.a.createElement("br",null),a.a.createElement("input",{onChange:function(e){return o(e.target.value)},style:{width:600,height:80,marginBottom:20,outline:"none",border:"solid 1px",padding:5,fontSize:40,textAlign:"center"}}),a.a.createElement("br",null),a.a.createElement("button",{style:{width:400,fontSize:30,padding:20},onClick:function(){n&&(d.openOrJoin(n),u(!0))}},"Join Room")),a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("div",{id:"callers",style:{width:"70vw",display:"flex",alignItems:"center",height:"99vh",justifyContent:"space-around",flexWrap:"wrap",marginTop:"10px"}}),a.a.createElement("div",{style:{width:"29vw"}},a.a.createElement(b,{roomCode:n,active:l}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.4ef81b76.chunk.js.map